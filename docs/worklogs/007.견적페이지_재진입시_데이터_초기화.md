# 007. 견적 페이지 재진입 시 데이터 초기화

## 작업일: 2026-02-10

## 문제
- 견적 요청 완료 후 다시 `/estimate` 페이지에 진입하면 이전 견적 데이터가 폼/채팅에 그대로 남아있음
- `resetSchema()` + `clearChat()`이 완료 페이지의 "새 견적 요청하기" 버튼에서만 호출됨
- 홈(`/`) → `/estimate`, 마이페이지 → `/estimate` 등 다른 경로로 진입 시 리셋되지 않음
- localStorage에 `estimate-storage`로 스키마가 persist되어 새로고침 후에도 이전 데이터 잔존

## 해결 방법
`EstimatePage` 컴포넌트 마운트 시 `estimateId` 존재 여부를 확인하여 자동 리셋:

- `estimateId` 있음 → 이미 DB에 저장된 견적 → `resetSchema()` + `clearChat()` 호출
- `estimateId` 없음 → 작성 중인 새 견적 → 데이터 유지 (새로고침 시 보존)

## 수정 파일
| 파일 | 변경 내용 |
|------|----------|
| `src/app/(customer)/estimate/page.tsx` | `useEffect`로 마운트 시 estimateId 확인 후 스토어 리셋 로직 추가 |

## 커버되는 시나리오
1. 견적 제출 완료 → 홈 → 다시 견적 페이지 진입 → 깨끗한 폼
2. 마이페이지 → "새 견적 신청하기" → 깨끗한 폼
3. 완료 페이지 → "새 견적 요청하기" → 기존처럼 동작 유지
4. 작성 중 새로고침 → 데이터 유지 (estimateId 없으므로 리셋 안 됨)

## 커밋
- `32b86c5` - fix: 견적 페이지 재진입 시 이전 데이터 자동 초기화
